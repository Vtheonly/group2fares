version: '3.8'

services:
  factory_pipeline:
    build: .
    container_name: ai_factory_generator
    volumes:
      - ./data:/app/data
      # Persist 3D models and images to avoid re-scraping/re-generating
      - ./cache:/app/factory_builder/cache
    env_file:
      - .env
    environment:
      # Architect Config
      - INPUT_FILE=/app/data/input.json
      - OUTPUT_DIR=/app/data/output
      # Builder Config
      - MAX_WORKERS=1
      - API_TIMEOUT=1200
      # API Keys should be in .env, but can be passed here too
